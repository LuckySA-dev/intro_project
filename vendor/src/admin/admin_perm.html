<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ระบบจัดการโครงการ – จัดการผู้ใช้งาน</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../../style/style.css" />
</head>
<body class="student-dashboard">

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="container-fluid px-3">
      <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-2 top-left">
          <button class="btn btn-icon-home" aria-label="หน้าหลัก">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
          </button>
          <span class="breadcrumb-arrow">›</span>
          <span class="breadcrumb-text fw-semibold">Home</span>
          <span class="breadcrumb-arrow">›</span>
          <span class="breadcrumb-text fw-semibold">จัดการผู้ใช้งาน</span>
        </div>

        <div class="d-flex align-items-center gap-3 top-right">
          <div class="search-box">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" placeholder="Search" class="search-input" />
          </div>
          <button class="btn btn-icon-notif">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
          </button>
          <div class="avatar">A</div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="dashboard-wrap container-fluid">
    <div class="row g-3">

      <!-- LEFT SIDEBAR -->
      <div class="col-12 col-lg-auto">
        <aside class="sidebar">
          <div class="logo-section">
            <div class="logo-img">
              <img src="../../img/logo.png" alt="Logo" height="100%" width="100%">
            </div>
          </div>

          <nav class="sidebar-nav">
            <a href="admin.html" class="nav-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
              <span>หน้าหลัก</span>
            </a>

            <a href="admin_perm.html" class="nav-item active">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <span>จัดการผู้ใช้งาน</span>
            </a>

            <a href="admin_exam.html" class="nav-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
              </svg>
              <span>กำหนดกรรมการสอบ</span>
            </a>

            <a href="admin_setting.html" class="nav-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
              </svg>
              <span>รายงานสรุปโครงการ</span>
            </a>
          </nav>
          
          <div class="sidebar-footer">
            <a href="../../../index.html" class="nav-item nav-item-special">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
              <span>หน้าหลัก Login</span>
            </a>
            
            <a href="../../../index.html" class="nav-item nav-item-logout mt-2">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              <span>ออกจากระบบ</span>
            </a>
          </div>
        </aside>
      </div>

      <!-- MAIN CONTENT -->
      <div class="col-12 col-lg">
        <div class="content-area">
          
          <!-- Header Section -->
          <div class="admin-header-section-white">
            <h3 class="mt-2">จัดการผู้ใช้งาน</h3>
          </div>

          <!-- Dashboard Stats -->
          <div class="row g-3 mb-4">
            <div class="col-6 col-md-3">
              <div class="admin-stat-card">
                <h3>125</h3>
                <p>นักศึกษาทั้งหมด</p>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="admin-stat-card">
                <h3>24</h3>
                <p>อาจารย์ที่ปรึกษา</p>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="admin-stat-card">
                <h3>8</h3>
                <p>อาจารย์ผู้สร้างข้อสอบ</p>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="admin-stat-card">
                <h3>32</h3>
                <p>กรรมการทั้งหมด</p>
              </div>
            </div>
          </div>

          <!-- CRUD Section -->
          <div class="card-widget">
            <div class="card-header-action">
              <h5 class="m-0">รายการผู้ใช้งาน</h5>
              <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#userModal" onclick="openAddUser()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-1">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                เพิ่มผู้ใช้งาน
              </button>
            </div>

            <!-- Search and Filter -->
            <div class="table-controls mb-3">
              <div class="row g-2">
                <div class="col-md-4">
                  <input type="text" class="form-control" id="searchUser" placeholder="ค้นหาชื่อ, อีเมล, รหัส...">
                </div>
                <div class="col-md-3">
                  <select class="form-select" id="filterRole">
                    <option value="">ทุกบทบาท</option>
                    <option value="student">นักศึกษา</option>
                    <option value="advisor">อาจารย์ที่ปรึกษา</option>
                    <option value="examiner">อาจารย์ผู้สร้างข้อสอบ</option>
                    <option value="committee">กรรมการ</option>
                    <option value="admin">ผู้ดูแลระบบ</option>
                  </select>
                </div>
                <div class="col-md-3">
                  <select class="form-select" id="filterStatus">
                    <option value="">ทุกสถานะ</option>
                    <option value="active">ใช้งาน</option>
                    <option value="inactive">ไม่ใช้งาน</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- User Table -->
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th width="5%">#</th>
                    <th width="15%">รหัส</th>
                    <th width="20%">ชื่อ-นามสกุล</th>
                    <th width="20%">อีเมล</th>
                    <th width="15%">บทบาท</th>
                    <th width="10%">สถานะ</th>
                    <th width="15%" class="text-center">จัดการ</th>
                  </tr>
                </thead>
                <tbody id="userTableBody">
                  <tr>
                    <td>1</td>
                    <td>65010001</td>
                    <td>สมชาย ใจดี</td>
                    <td>somchai@email.com</td>
                    <td><span class="badge bg-primary">นักศึกษา</span></td>
                    <td><span class="badge bg-success">ใช้งาน</span></td>
                    <td class="text-center">
                      <button class="btn btn-sm btn-info text-white me-1" onclick="viewUser(1)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                          <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-warning text-white me-1" onclick="editUser(1)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-danger mt-2" onclick="deleteUser(1)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="3 6 5 6 21 6"></polyline>
                          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>T001</td>
                    <td>ดร.สมหญิง มีปัญญา</td>
                    <td>somying@email.com</td>
                    <td><span class="badge bg-info">อาจารย์ที่ปรึกษา</span></td>
                    <td><span class="badge bg-success">ใช้งาน</span></td>
                    <td class="text-center">
                      <button class="btn btn-sm btn-info text-white me-1" onclick="viewUser(2)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                          <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-warning text-white me-1" onclick="editUser(2)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-danger mt-2" onclick="deleteUser(2)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="3 6 5 6 21 6"></polyline>
                          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>65010002</td>
                    <td>สมศรี รักเรียน</td>
                    <td>somsri@email.com</td>
                    <td><span class="badge bg-primary">นักศึกษา</span></td>
                    <td><span class="badge bg-secondary">ไม่ใช้งาน</span></td>
                    <td class="text-center">
                      <button class="btn btn-sm btn-info text-white me-1" onclick="viewUser(3)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                          <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-warning text-white me-1" onclick="editUser(3)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-danger mt-2" onclick="deleteUser(3)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="3 6 5 6 21 6"></polyline>
                          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="d-flex justify-content-between align-items-center mt-3">
              <div class="text-muted ms-2">แสดง 1-3 จาก 125 รายการ</div>
              <nav>
                <ul class="pagination mb-2 me-2">
                  <li class="page-item disabled"><a class="page-link" href="#">ก่อนหน้า</a></li>
                  <li class="page-item active"><a class="page-link" href="#">1</a></li>
                  <li class="page-item"><a class="page-link" href="#">2</a></li>
                  <li class="page-item"><a class="page-link" href="#">3</a></li>
                  <li class="page-item"><a class="page-link" href="#">ถัดไป</a></li>
                </ul>
              </nav>
            </div>
          </div>

        </div>
      </div>

    </div>
  </main>

  <!-- User Modal (Add/Edit) -->
  <div class="modal fade" id="userModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="userModalTitle">เพิ่มผู้ใช้งานใหม่</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="userForm">
            <input type="hidden" id="userId">
            
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">รหัสผู้ใช้งาน <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="userCode" required>
              </div>
              
              <div class="col-md-6">
                <label class="form-label">บทบาท <span class="text-danger">*</span></label>
                <select class="form-select" id="userRole" required>
                  <option value="">เลือกบทบาท</option>
                  <option value="student">นักศึกษา</option>
                  <option value="advisor">อาจารย์ที่ปรึกษา</option>
                  <option value="examiner">อาจารย์ผู้สร้างข้อสอบ</option>
                  <option value="committee">กรรมการ</option>
                  <option value="admin">ผู้ดูแลระบบ</option>
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label">ชื่อ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="userFirstName" required>
              </div>

              <div class="col-md-6">
                <label class="form-label">นามสกุล <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="userLastName" required>
              </div>

              <div class="col-md-12">
                <label class="form-label">อีเมล <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="userEmail" required>
              </div>

              <div class="col-md-6">
                <label class="form-label">เบอร์โทรศัพท์</label>
                <input type="tel" class="form-control" id="userPhone">
              </div>

              <div class="col-md-6">
                <label class="form-label">สถานะ <span class="text-danger">*</span></label>
                <select class="form-select" id="userStatus" required>
                  <option value="active">ใช้งาน</option>
                  <option value="inactive">ไม่ใช้งาน</option>
                </select>
              </div>

              <div class="col-md-12">
                <label class="form-label">หมายเหตุ</label>
                <textarea class="form-control" id="userNote" rows="3"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
          <button type="button" class="btn btn-primary" onclick="saveUser()">บันทึก</button>
        </div>
      </div>
    </div>
  </div>

  <!-- View User Modal -->
  <div class="modal fade" id="viewUserModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">รายละเอียดผู้ใช้งาน</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="viewUserContent">
          <!-- Content will be populated by JavaScript -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Sample data
    let users = [
      { id: 1, code: '65010001', firstName: 'สมชาย', lastName: 'ใจดี', email: 'somchai@email.com', phone: '081-234-5678', role: 'student', status: 'active', note: '' },
      { id: 2, code: 'T001', firstName: 'ดร.สมหญิง', lastName: 'มีปัญญา', email: 'somying@email.com', phone: '082-345-6789', role: 'advisor', status: 'active', note: '' },
      { id: 3, code: '65010002', firstName: 'สมศรี', lastName: 'รักเรียน', email: 'somsri@email.com', phone: '083-456-7890', role: 'student', status: 'inactive', note: 'พักการศึกษา' }
    ];

    // Open add user modal
    function openAddUser() {
      document.getElementById('userModalTitle').textContent = 'เพิ่มผู้ใช้งานใหม่';
      document.getElementById('userForm').reset();
      document.getElementById('userId').value = '';
    }

    // View user details
    function viewUser(id) {
      const user = users.find(u => u.id === id);
      if (user) {
        const roleNames = {
          student: 'นักศึกษา',
          advisor: 'อาจารย์ที่ปรึกษา',
          examiner: 'อาจารย์ผู้สร้างข้อสอบ',
          committee: 'กรรมการ',
          admin: 'ผู้ดูแลระบบ'
        };
        const statusNames = { active: 'ใช้งาน', inactive: 'ไม่ใช้งาน' };
        
        document.getElementById('viewUserContent').innerHTML = `
          <div class="user-detail-view">
            <div class="mb-3"><strong>รหัส:</strong> ${user.code}</div>
            <div class="mb-3"><strong>ชื่อ-นามสกุล:</strong> ${user.firstName} ${user.lastName}</div>
            <div class="mb-3"><strong>อีเมล:</strong> ${user.email}</div>
            <div class="mb-3"><strong>เบอร์โทรศัพท์:</strong> ${user.phone || '-'}</div>
            <div class="mb-3"><strong>บทบาท:</strong> <span class="badge bg-primary">${roleNames[user.role]}</span></div>
            <div class="mb-3"><strong>สถานะ:</strong> <span class="badge bg-${user.status === 'active' ? 'success' : 'secondary'}">${statusNames[user.status]}</span></div>
            <div class="mb-3"><strong>หมายเหตุ:</strong> ${user.note || '-'}</div>
          </div>
        `;
        new bootstrap.Modal(document.getElementById('viewUserModal')).show();
      }
    }

    // Edit user
    function editUser(id) {
      const user = users.find(u => u.id === id);
      if (user) {
        document.getElementById('userModalTitle').textContent = 'แก้ไขข้อมูลผู้ใช้งาน';
        document.getElementById('userId').value = user.id;
        document.getElementById('userCode').value = user.code;
        document.getElementById('userFirstName').value = user.firstName;
        document.getElementById('userLastName').value = user.lastName;
        document.getElementById('userEmail').value = user.email;
        document.getElementById('userPhone').value = user.phone;
        document.getElementById('userRole').value = user.role;
        document.getElementById('userStatus').value = user.status;
        document.getElementById('userNote').value = user.note;
        new bootstrap.Modal(document.getElementById('userModal')).show();
      }
    }

    // Delete user
    function deleteUser(id) {
      if (confirm('คุณต้องการลบผู้ใช้งานนี้ใช่หรือไม่?')) {
        users = users.filter(u => u.id !== id);
        alert('ลบผู้ใช้งานเรียบร้อยแล้ว');
        // Reload table here
      }
    }

    // Save user
    function saveUser() {
      const userId = document.getElementById('userId').value;
      const userData = {
        code: document.getElementById('userCode').value,
        firstName: document.getElementById('userFirstName').value,
        lastName: document.getElementById('userLastName').value,
        email: document.getElementById('userEmail').value,
        phone: document.getElementById('userPhone').value,
        role: document.getElementById('userRole').value,
        status: document.getElementById('userStatus').value,
        note: document.getElementById('userNote').value
      };

      if (userId) {
        // Update existing user
        const index = users.findIndex(u => u.id === parseInt(userId));
        if (index !== -1) {
          users[index] = { ...users[index], ...userData };
          alert('แก้ไขข้อมูลเรียบร้อยแล้ว');
        }
      } else {
        // Add new user
        const newUser = { id: users.length + 1, ...userData };
        users.push(newUser);
        alert('เพิ่มผู้ใช้งานเรียบร้อยแล้ว');
      }

      bootstrap.Modal.getInstance(document.getElementById('userModal')).hide();
      // Reload table here
    }

    // Search functionality
    document.getElementById('searchUser').addEventListener('input', function(e) {
      // Implement search logic here
      console.log('Searching:', e.target.value);
    });

    // Filter by role
    document.getElementById('filterRole').addEventListener('change', function(e) {
      // Implement filter logic here
      console.log('Filter by role:', e.target.value);
    });

    // Filter by status
    document.getElementById('filterStatus').addEventListener('change', function(e) {
      // Implement filter logic here
      console.log('Filter by status:', e.target.value);
    });
  </script>
</body>
</html>

 

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
